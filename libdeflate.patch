diff --git a/Makefile b/Makefile
index 780d99f..948ab92 100644
--- a/Makefile
+++ b/Makefile
@@ -113,7 +113,7 @@ ifneq ($(findstring -mingw,$(shell $(CC) -dumpmachine 2>/dev/null)),)
     endif
 
 # macOS?
-else ifeq ($(shell uname),Darwin)
+else ifeq ($(findstring -darwin,$(shell $(CC) -dumpmachine 2>/dev/null)),-darwin)
    SHARED_LIB         := libdeflate.$(SOVERSION).dylib
    SHARED_LIB_SYMLINK := libdeflate.dylib
    SHARED_LIB_CFLAGS  := -fPIC
